# Introduction to x86's architecture

## Register Set and Data Types

---

While being in protected mode, the x86 architecture has eight 32--bit general purpose registers \(GPRs\): EAX, EBX, ECX, EDX; EDI, ESI, EBP and ESP. Some of them can be further divided into 8- and 16-bit registers. The instruction pointer is stored in the EIP register.

**Figure 1-1**

<img src="res/registers.png" width="500"/>

**Table 1.1:** Some GPRs and Their Usage

| REGISTER | PURPOSE |
| :--- | :--- |
| ECX | Counter in loops |
| ESI | Source in string/memory operations |
| EDI | Destination in string/memory operations |
| EBP | Base frame pointer |
| ESP | Stack pointer |

The common data types are as follows:
* **Bytes** - 8 bits. Examples AL, BL, CL
* **Word** - 16 bits. Examples AX, BX, CX
* **Double word** - 32 bits. Examples EAX, EBX, ECX
* **Quad word** - 64 bits. While x86 does not have 64-bit GPRs, it can combine
two registers, usually EDX:EAX , and treat them as 64-bit values in some scenarios.
For example, the RDTSC instruction writes a 64-bit value to EDX:EAX.

The 32-bit EFLAGS register is used to store the status of arithmetic operations
and other execution states (e.g., trap fl ag). For example, if the previous “add”
operation resulted in a zero, the ZF flag will be set to 1. The flags in EFLAGS are
primarily used to implement conditional branching.
In addition to the GPRs, EIP, and EFLAGS, there are also registers that control
important low-level system mechanisms such as virtual memory, interrupts, and
debugging. For example, CR0 controls whether paging is on or off, CR2 contains
the linear address that caused a page fault, CR3 is the base address of a paging
data structure, and CR4 controls the hardware virtualization settings. DR0 – DR7
are used to set memory breakpoints. We will come back to these registers later
in the "System Mechanism" section.

> **NOTE** **Although there are seven debug rgisters, the system allows only for four memory breakpoints (DR0-DR3). Remaining registers are used for status.**




